<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="using:Flit.Views"
        x:Class="Flit.Views.FindInTabsDialog"
        x:Name="ThisDialog"
        x:DataType="views:FindInTabsDialog"
        Title="Find in All Tabs"
        Width="600"
        Height="400"
        WindowStartupLocation="CenterOwner"
        CanResize="True"
        ShowInTaskbar="False">

    <Window.KeyBindings>
        <KeyBinding Gesture="Escape" Command="{Binding #ThisDialog.CloseCommand}" />
        <KeyBinding Gesture="Enter" Command="{Binding #ThisDialog.GoToSelectedCommand}" />
    </Window.KeyBindings>

    <DockPanel Margin="16">
        <!-- Search Row -->
        <Grid DockPanel.Dock="Top" ColumnDefinitions="*,Auto" Margin="0,0,0,12">
            <TextBox x:Name="SearchTextBox"
                     Watermark="Search in all tabs..."
                     TextChanged="SearchTextBox_TextChanged"/>
            <CheckBox x:Name="CaseSensitiveCheckBox"
                      Grid.Column="1"
                      Content="Case sensitive"
                      Margin="8,0,0,0"
                      VerticalAlignment="Center"
                      Checked="CaseSensitiveCheckBox_Changed"
                      Unchecked="CaseSensitiveCheckBox_Changed"/>
        </Grid>

        <!-- Status -->
        <TextBlock x:Name="StatusText"
                   DockPanel.Dock="Top"
                   Foreground="{DynamicResource SecondaryText}"
                   FontSize="11"
                   Margin="0,0,0,8"
                   Text=""/>

        <!-- Results List -->
        <ListBox x:Name="ResultsListBox"
                 DoubleTapped="ResultsListBox_DoubleTapped">
            <ListBox.ItemTemplate>
                <DataTemplate x:DataType="views:SearchResult">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="{Binding TabTitle}"
                                   Foreground="{DynamicResource AccentColor}"
                                   FontWeight="SemiBold"
                                   Width="120"
                                   TextTrimming="CharacterEllipsis"/>
                        <TextBlock Text="{Binding LineNumber, StringFormat='Ln {0}'}"
                                   Foreground="{DynamicResource SecondaryText}"
                                   Width="50"/>
                        <TextBlock Text="{Binding LinePreview}"
                                   TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>
